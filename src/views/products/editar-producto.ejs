<!DOCTYPE html>
<html lang="en">
    <%- include('../partials/head.ejs')%>

  <body>
    <%- include('../partials/header.ejs')%>

    <main>
      <div>
        <div>
          <h2>Editar producto</h2>
        </div>
          <form class="contenedor-inputs" action="/products/update/<%=product.id%>?_method=PUT" method="POST">

              <div class="subtitulo">
                <h3>Editando el Producto "<%= product.name %>"</h3>
              </div>

              <div class="label-input">
              <label for="name">Nombre del producto:</label>
              <input
                type="text"
                name="name"
                class="form-input"
                value="<%= product.name %>"/>
                <% if(locals.errors && errors.name) {%>
                  <div class="text-danger"><%= errors.name %></div>
                <% } %>
            </div>

            <div class="label-input">
              <label for="price">Precio:</label>
              <input
                type="number"
                step=".01"
                name="price"
                class="form-input"
                value="<%= product.price %>"/>
              <div id="erroresPrice" class="text-danger"></div>
            </div>

            <div class="label-input">
              <label for="discount">Descuento:</label>
              <input
                type="number"
                step=".01"
                name="discount"
                class="form-input"
                value="<%= product.discount %>"/>
              <div id="erroresDiscount" class="text-danger"></div>
            </div>

            <div class="label-input">
              <label for="discount">Tama√±o:</label>
              <select name="size" id="">
                <% for (let i = 0; i < sizes.length; i++) { %> 
                    <% if (sizes[i].id == product.size_id) { %> 
                        <option value="<%= sizes[i].id %>" selected> 
                            <%=sizes[i].name %> 
                        </option>
                    <%  } else { %> 
                        <option value="<%= sizes[i].id %>"> 
                            <%=sizes[i].name %> 
                        </option>
                <%  } %> 
                <%  } %> 
            </select>
              <div id="erroresSize" class="text-danger"></div>
            </div>

            <div class="label-input">
              <label for="name">Bodega:</label>
              <select name="bodega" id="">
                <% for (let i = 0; i < bodegas.length; i++) { %> 
                    <% if (bodegas[i].id == product.bodega_id) { %> 
                        <option value="<%= bodegas[i].id %>" selected> 
                            <%=bodegas[i].name %> 
                        </option>
                    <%  } else { %> 
                        <option value="<%= bodegas[i].id %>"> 
                            <%=bodegas[i].name %> 
                        </option>
                <%  } %> 
                <%  } %> 
            </select>
              <div id="erroresBodega" class="text-danger"></div>
            </div>

            <div class="label-input">
              <label for="name">Provincia:</label>
              <select name="province" id="">
                <% for (let i = 0; i < provinces.length; i++) { %> 
                    <% if (provinces[i].id == product.province_id) { %> 
                        <option value="<%= provinces[i].id %>" selected> 
                            <%=provinces[i].name %> 
                        </option>
                    <%  } else { %> 
                        <option value="<%= provinces[i].id %>"> 
                            <%=provinces[i].name %> 
                        </option>
                <%  } %> 
                <%  } %> 
            </select>
              <div id="erroresProvincia" class="text-danger"></div>
            </div>

            <div class="label-input">
              <label for="name">Categoria:</label>
              <select name="category" id="">
                <% for (let i = 0; i < categories.length; i++) { %> 
                    <% if (categories[i].id == product.category_id) { %> 
                        <option value="<%= categories[i].id %>" selected> 
                            <%=categories[i].name %> 
                        </option>
                    <%  } else { %> 
                        <option value="<%= categories[i].id %>"> 
                            <%=categories[i].name %> 
                        </option>
                <%  } %> 
                <%  } %> 
            </select>
              <div id="erroresCategory" class="text-danger"></div>
            </div>

            <div class="label-input">
              <p><label>Detalle de producto</label></p>
              <textarea
                name="descripcion"
                rows="10"
                class="description-input"
                cols="40"><%= product.descripcion %>
              </textarea>
              <div id="erroresDescription" class="text-danger"></div>
            </div>

            <div class="label-input">
              <label for="">Imagen:</label>
              <input type="file" name="image" class="input-foto" />
              <div id="erroresImg" class="lista-errores"></div>
            </div>

            <div class="form-label">
              <button type="submit" class="boton-crear">Guardar Cambios</button>
            </div>

            <div class="label-input">
              <a class="boton-cancel" href="/products">Volver a productos</a>
            </div>
            <div class="label-input">
              <a class="boton-delete" href="/products/delete/<%=product.id%>">Eliminar</a>
            </div>
          </form>
      </div>
    </main>
    <%- include('../partials/footer.ejs')%>
  </body>
</html>
