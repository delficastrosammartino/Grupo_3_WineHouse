<head>
  <%- include("../partials/head.ejs") %>
  <link rel="stylesheet" href="/css/carrito.css" />
</head>

<body>
  <%- include("../partials/header.ejs") %>
  <main>
    <div class="contenedor-titulo">
      <div class="title">Carrito:</div>
  </div>
    <div class="box-product">
      <% if (typeof cart !== "undefined" && cart.length > 0) { %>
        <% cart.forEach(function(item) { %>
          <p>Name: <%= item.name %></p>
          <p>Bodega: <%= item.bodega %></p>
          <p>Price: <%= item.price %></p>
        <% }); %>
      <% } %>

      <div class="box-img-price-description">
        <img class="wine" src="/images/productImages/1675122724044_img.webp" alt="Imagen de El Esteco Old Vines"/>
        <div class="price">$1.750</div>
      </div>

      <div class="bottom-product-box">
        <div class="box-cantidad-delete">
          <div class="cantidad">
            <i class="fa-solid fa-minus"></i> 1 <i class="fa-solid fa-plus"></i>
          </div>
        </div>

        <div class="delete">
          <div>eliminar <i class="fa-solid fa-trash-can"></i></div>
        </div>
      </div>
    </div>

    <div class="box-desktop">
      <% if (cart && cart.length > 0) { %>
        <table>
          <thead>
            <tr>
              <th class="table-header">Nombre</th>
              <th class="table-header">Bodega</th>
              <th class="table-header">Categoria</th>
              <th class="table-header">Precio</th>
              <th class="table-header">Eliminar</th>
            </tr>
          </thead>
          <tbody>
            <% cart.forEach((item, index) => { %>
              <tr>
                <td class="table-cell"><%= item.name %></td>
                <td class="table-cell"><%= item.bodega %> </td>
                <td class="table-cell"><%= item.category %> </td>
                <td class="table-cell"><%= item.price %></td>
                <td>
                  <form action="/products/carrito" method="POST">
                    <input type="hidden" name="index" value="<%= index %>">
                    <button type="submit" class="button">Eliminar</button>
                  </form>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      <% } else { %>
        <p>No hay productos en el carrito</p>
      <% } %>
      <div class="buttons">
        <input type="submit" class="boton" value="Confirmar compra" />
        <a class="boton" href="/products">Seguir comprando</a>
        <a class="boton" href="/products/carrito">Vaciar carrito</a>
    </div>
      <div class="box-list">
        <div class="column">
          <div class="box-title">Producto</div>
          <img class="wine" src="/images/productImages/1675122724044_img.webp" alt="Imagen de El Esteco Old Vines"/>

        </div>
        <div class="column-special">Serbal Pinot Noir 750cc</div>
        <div class="column">
          <div class="box-title">Precio unitario</div>
          <div class="column-middle">$1.750</div>
        </div>

        <div class="column">
          <div class="box-title">Precio cantidad</div>
          <div class="column-middle">
            <i class="fa-solid fa-minus"></i> 2 <i class="fa-solid fa-plus"></i>
          </div>
        </div>
        
        <div class="column">
          <div class="box-title">Subtotal</div>
          <div class="column-middle">$3.500</div>
        </div>

        <div class="column-special">
          <i class="fa-solid fa-trash-can"></i>
        </div>
        <div class="line"></div>
        <div class="line"></div>
      </div>
      <div class="box-compra">
        <div class="title">Resumen de compra</div>
        <div class="sub-title">
          <i class="fa-solid fa-percent"></i>
          <input
            class="box-discount"
            type="text"
            name="descuento"
            placeholder="CÃ³digo de descuento"
          />
        </div>
        <div class="list-articles"></div>
        <div class="pay-button">Pagar</div>
        <div class="continue-button">
          <i class="fa-solid fa-angle-left"></i> seguir comprando
        </div>
      </div>
    </div>
  </main>
  <%- include("../partials/footer.ejs") %>
</body>
